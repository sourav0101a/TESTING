public class PicklistHelper {
    @InvocableMethod
    public static void removeDuplicates(List<Id> accountIds) {
    //public static void removeDuplicates(Id accountIds) {    
        List<Account> accounts = [SELECT Id, NOM_Customer_Group__c FROM Account WHERE Id IN :accountIds];
        System.debug('accounts value is 148778:' +accounts);
        for (Account acc : accounts) {
            if (acc.NOM_Customer_Group__c != null) {
                // Split the multi-select picklist values into a list
                List<String> valuesList = new List<String>(acc.NOM_Customer_Group__c.split(';'));

                // Remove duplicates by converting the list to a Set and then back to a List
                Set<String> uniqueValues = new Set<String>(valuesList);
                List<String> cleanedList = new List<String>(uniqueValues);
                System.debug('uniqueValues value is 148778:' +uniqueValues);
                System.debug('cleanedList value is 148778:' +cleanedList);
                // Manually join the cleaned list into a single string with semicolon delimiter
                String joinedString = '';
                for (Integer i = 0; i < cleanedList.size(); i++) {
                    joinedString += cleanedList[i];
                    if (i < cleanedList.size() - 1) {
                        joinedString += ';';
                    }
                }
                System.debug('joinedString value is 148778:' +joinedString);
                // Assign the cleaned string back to the Account_Service__c field
                acc.NOM_Customer_Group__c = joinedString;
            }
        }
        update accounts;
    }
}
