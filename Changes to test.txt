@isTest
public class OpportunityTriggerUtilityTest {

    @isTest
    static void testOpptyCampaignAssociation() {
        // Create test opportunities
        Opportunity clonedOpportunity1 = new Opportunity(Name = 'Test Opportunity 1', StageName = 'Prospecting');
        Opportunity clonedOpportunity2 = new Opportunity(Name = 'Test Opportunity 2', StageName = 'Prospecting');
        insert new List<Opportunity>{clonedOpportunity1, clonedOpportunity2};

        // Create test campaigns
        Campaign testCampaign1 = new Campaign(Name = 'Test Campaign 1', Unica_ID__c = 'Campaign1');
        Campaign testCampaign2 = new Campaign(Name = 'Test Campaign 2', Unica_ID__c = 'Campaign2');
        insert new List<Campaign>{testCampaign1, testCampaign2};

        // Create test campaign influence records
        List<CampaignInfluence> campaignInfluenceRecords = new List<CampaignInfluence>{
            new CampaignInfluence(OpportunityId = clonedOpportunity1.Id, CampaignId = testCampaign1.Id, ModelId = 'Model1'),
            new CampaignInfluence(OpportunityId = clonedOpportunity2.Id, CampaignId = testCampaign2.Id, ModelId = 'Model2')
        };
        insert campaignInfluenceRecords;

        // Prepare clonedOppMap with test data
        Map<Id, Id> clonedOppMap = new Map<Id, Id>{
            clonedOpportunity1.Id => clonedOpportunity1.Id,
            clonedOpportunity2.Id => clonedOpportunity2.Id
        };

        // Prepare genesisOppMap with test data
        Map<Id, String> genesisOppMap = new Map<Id, String>{
            clonedOpportunity1.Id => 'Test Campaign 1',
            clonedOpportunity2.Id => 'Test Campaign 2'
        };

        // Call the method to be tested
        Test.startTest();
        OpportunityTriggerUtility.opptyCampaignAssociation(clonedOppMap, genesisOppMap);
        Test.stopTest();

        // Add assertions if needed
    }
}

IF(ISBLANK(Likely_Restoration_Time__c),"Unpopulated", IF (Likely_Restoration_Time__c < NOW(),"Breached", IF((Likely_Restoration_Time__c - NOW())*1440 <60,"Approaching Breach","Ok")))
